<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <link rel="icon" href="data:," />
    <title>Chasing Horizons</title>

    <link
      rel="stylesheet"
      href="/css/dashboard/hotelManager/index.css"
    />
    <link
      rel="stylesheet"
      href="/css/dashboard/hotelManager/sidebar.css"
    />
    <link
      rel="stylesheet"
      href="/css/dashboard/hotelManager/styles.css"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script
      defer
      src="/js/dashboard/hotelManager/sidebar.js"
    ></script>
  </head>
  <body>
    <div class="container">
      <div class="sidebar collapsed" id="sidebar">
        <div class="logo-title">
          <span>CHASING HORIZONS</span>
        </div>
        <div class="admin">
          <div class="profile">
            <span class="admin-photo">
              <img
                style="cursor: pointer"
                onclick="{window.location.href = '/'}"
                src="/images/logo.png"
                alt="photo"
                width="18rem"
                height="18rem"
              />
            </span>
          </div>
          <h5>Admin</h5>
          <h5><%=user.email%></h5>
        </div>
        <hr />
        <br />
        <h5 class="dashboard-heading">DASHBOARDS</h5>
        <div class="sidenav">
          <div class="link">
            <a href="/dashboard/hotelManager">
              <span class="material-symbols-outlined icon"
                >dashboard</span
              >
              Dashboard</a
            >
          </div>

          <div class="link">
            <a href="/dashboard/hotelManager/booking">
              <span class="material-symbols-outlined icon"
                >event</span
              >
              Bookings</a
            >
          </div>

          <div class="link">
            <a href="/dashboard/hotelManager/addRoom">
              <span class="material-symbols-outlined icon"
                >meeting_room</span
              >
              Rooms</a
            >
          </div>

          <div class="link active">
            <a href="/dashboard/hotelManager/myHotel">
              <span class="material-symbols-outlined icon"
                >hotel</span
              >
              My Hotel</a
            >
          </div>
        </div>
      </div>
      <div class="main">
        <div class="toggle-btn" id="toggle-sidebar">
          <button
            class="toggle-btn"
            style="
              padding: 5px;
              border: none;
              background: transparent;
            "
          >
            <i
              style="color: white; font-size: 26px"
              class="fas fa-bars"
            ></i>
          </button>
        </div>

        <!-- Main Content -->
        <div style="flex: 1; overflow: auto">
          <div
            style="
              max-width: 1280px;
              margin: 0 auto;
              padding: 2rem 1.5rem;
            "
          >
            <h3
              style="
                font-size: 2.25rem;
                font-weight: bold;
                color: white;
                margin-bottom: 2rem;
                padding-bottom: 1rem;
              "
            >
              Hotel Management Dashboard
            </h3>

            <form
              id="editHotelForm"
              style="
                background: white;
                border-radius: 0.75rem;
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
                padding: 2rem;
                margin-bottom: 2rem;
              "
            >
              <div
                style="
                  display: grid;
                  grid-template-columns: 1fr;
                  gap: 2rem;
                "
              >
                <!-- Basic Information -->
                <div
                  style="
                    background: white;
                    padding: 1.5rem;
                    border-radius: 0.5rem;
                    border: 1px solid #e5e7eb;
                    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                  "
                >
                  <h4
                    style="
                      font-size: 1.5rem;
                      font-weight: 600;
                      color: #1f2937;
                      margin-bottom: 1.5rem;
                      display: flex;
                      align-items: center;
                    "
                  >
                    <span
                      class="material-symbols-outlined"
                      style="margin-right: 0.5rem"
                      >hotel</span
                    >
                    Basic Information
                  </h4>

                  <div
                    style="
                      display: flex;
                      flex-direction: column;
                      gap: 1.5rem;
                    "
                  >
                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Hotel Name</label
                      >
                      <input
                        type="text"
                        name="title"
                        value="<%= hotel.title %>"
                        style="
                          width: 100%;
                          padding: 0.75rem 1rem;
                          border-radius: 0.5rem;
                          border: 1px solid #d1d5db;
                          transition: all 0.2s;
                        "
                      />
                    </div>

                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Description</label
                      >
                      <textarea
                        name="description"
                        rows="4"
                        style="
                          width: 100%;
                          padding: 0.75rem 1rem;
                          border-radius: 0.5rem;
                          border: 1px solid #d1d5db;
                          transition: all 0.2s;
                          resize: none;
                        "
                      >
<%= hotel.description %></textarea
                      >
                    </div>

                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Address</label
                      >
                      <input
                        type="text"
                        name="address"
                        value="<%= hotel.address %>"
                        style="
                          width: 100%;
                          padding: 0.75rem 1rem;
                          border-radius: 0.5rem;
                          border: 1px solid #d1d5db;
                          transition: all 0.2s;
                        "
                      />
                    </div>

                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Location</label
                      >
                      <input
                        type="text"
                        name="location"
                        value="<%= hotel.location %>"
                        style="
                          width: 100%;
                          padding: 0.75rem 1rem;
                          border-radius: 0.5rem;
                          border: 1px solid #d1d5db;
                          transition: all 0.2s;
                        "
                      />
                    </div>

                    <div
                      style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 1rem;
                      "
                    >
                      <div class="form-group">
                        <label
                          style="
                            display: block;
                            font-size: 0.875rem;
                            font-weight: 600;
                            color: #374151;
                            margin-bottom: 0.5rem;
                          "
                          >Rating</label
                        >
                        <input
                          type="number"
                          name="rating"
                          value="<%= hotel.rating %>"
                          min="1"
                          max="5"
                          step="0.1"
                          style="
                            width: 100%;
                            padding: 0.75rem 1rem;
                            border-radius: 0.5rem;
                            border: 1px solid #d1d5db;
                            transition: all 0.2s;
                          "
                        />
                      </div>

                      <div class="form-group">
                        <label
                          style="
                            display: block;
                            font-size: 0.875rem;
                            font-weight: 600;
                            color: #374151;
                            margin-bottom: 0.5rem;
                          "
                          >Currency</label
                        >
                        <input
                          type="text"
                          name="currency"
                          value="<%= hotel.currency %>"
                          style="
                            width: 100%;
                            padding: 0.75rem 1rem;
                            border-radius: 0.5rem;
                            border: 1px solid #d1d5db;
                            transition: all 0.2s;
                          "
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Additional Information -->
                <div
                  style="
                    background: white;
                    padding: 1.5rem;
                    border-radius: 0.5rem;
                    border: 1px solid #e5e7eb;
                    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                  "
                >
                  <h4
                    style="
                      font-size: 1.5rem;
                      font-weight: 600;
                      color: #1f2937;
                      margin-bottom: 1.5rem;
                      display: flex;
                      align-items: center;
                    "
                  >
                    <span
                      class="material-symbols-outlined"
                      style="margin-right: 0.5rem"
                      >stars</span
                    >
                    Additional Information
                  </h4>

                  <div
                    style="
                      display: flex;
                      flex-direction: column;
                      gap: 1.5rem;
                    "
                  >
                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Amenities</label
                      >
                      <div
                        id="amenitiesList"
                        style="
                          display: flex;
                          flex-direction: column;
                          gap: 0.75rem;
                          max-height: 300px;
                          overflow-y: auto;
                          padding: 1rem;
                          background-color: #f9fafb;
                          border-radius: 0.5rem;
                        "
                      >
                        <% hotel.amenities.forEach((amenity,
                        index) => { %>
                        <div
                          class="flex items-center space-x-3 bg-white p-2 rounded-lg shadow-sm"
                        >
                          <input
                            type="text"
                            name="amenities[]"
                            value="<%= amenity %>"
                            class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
                          />
                          <button
                            type="button"
                            class="remove-item text-red-500 hover:text-red-700 transition-colors"
                          >
                            <span
                              class="material-symbols-outlined"
                              >delete</span
                            >
                          </button>
                        </div>
                        <% }) %>
                      </div>
                      <button
                        type="button"
                        id="addAmenity"
                        class="mt-3 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center"
                      >
                        <span
                          class="material-symbols-outlined mr-2"
                          >add</span
                        >
                        Add Amenity
                      </button>
                    </div>

                    <div
                      class="form-group"
                      style="margin-top: 2rem"
                    >
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Policies</label
                      >
                      <div
                        id="policiesList"
                        style="
                          display: flex;
                          flex-direction: column;
                          gap: 0.75rem;
                          max-height: 300px;
                          overflow-y: auto;
                          padding: 1rem;
                          background-color: #f9fafb;
                          border-radius: 0.5rem;
                        "
                      >
                        <%
                        hotel.policies.forEach(function(policy,
                        index) { %>
                        <div
                          class="flex items-center space-x-3 bg-white p-2 rounded-lg shadow-sm"
                        >
                          <input
                            type="text"
                            name="policies[]"
                            value="<%= policy %>"
                            class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
                          />
                          <button
                            type="button"
                            class="remove-item text-red-500 hover:text-red-700 transition-colors"
                          >
                            <span
                              class="material-symbols-outlined"
                              >delete</span
                            >
                          </button>
                        </div>
                        <% }) %>
                      </div>
                      <button
                        type="button"
                        id="addPolicy"
                        class="mt-3 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center"
                      >
                        <span
                          class="material-symbols-outlined mr-2"
                          >add</span
                        >
                        Add Policy
                      </button>
                    </div>

                    <div class="form-group mt-8">
                      <label
                        class="block text-sm font-semibold text-gray-700 mb-2"
                        >Features</label
                      >
                      <div id="featuresList" class="space-y-6">
                        <% Object.entries(hotel.features ||
                        {}).forEach(([category, features]) => {
                        %>
                        <div
                          class="feature-category p-4 bg-gray-50 rounded-lg"
                        >
                          <div
                            class="flex items-center space-x-3 mb-4"
                          >
                            <span
                              class="material-symbols-outlined text-gray-600"
                              >category</span
                            >
                            <input
                              type="text"
                              name="featureCategories[]"
                              value="<%= category %>"
                              class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
                              placeholder="Category"
                            />
                          </div>
                          <div
                            class="feature-items space-y-3 pl-8"
                          >
                            <% features.forEach(feature => { %>
                            <div
                              class="flex items-center space-x-3 bg-white p-2 rounded-lg shadow-sm"
                            >
                              <span
                                class="material-symbols-outlined text-gray-400"
                                >check_circle</span
                              >
                              <input
                                type="text"
                                name="features_<%= category %>[]"
                                value="<%= feature %>"
                                class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
                              />
                              <button
                                type="button"
                                class="remove-feature text-red-500 hover:text-red-700 transition-colors"
                              >
                                <span
                                  class="material-symbols-outlined"
                                  >delete</span
                                >
                              </button>
                            </div>
                            <% }) %>
                          </div>
                          <button
                            type="button"
                            class="add-feature mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center ml-8"
                          >
                            <span
                              class="material-symbols-outlined mr-2"
                              >add</span
                            >
                            Add Feature
                          </button>
                        </div>
                        <% }) %>
                      </div>
                      <button
                        type="button"
                        id="addFeatureCategory"
                        class="mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center"
                      >
                        <span
                          class="material-symbols-outlined mr-2"
                          >add</span
                        >
                        Add Feature Category
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Images Section -->
                <div
                  style="
                    margin-top: 2rem;
                    background: white;
                    padding: 1.5rem;
                    border-radius: 0.5rem;
                    border: 1px solid #e5e7eb;
                    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                    grid-column: 1 / -1;
                  "
                >
                  <h4
                    style="
                      font-size: 1.5rem;
                      font-weight: 600;
                      color: #1f2937;
                      margin-bottom: 1.5rem;
                      display: flex;
                      align-items: center;
                    "
                  >
                    <span
                      class="material-symbols-outlined"
                      style="margin-right: 0.5rem"
                      >image</span
                    >
                    Images
                  </h4>

                  <div
                    style="
                      display: grid;
                      grid-template-columns: 1fr 1fr;
                      gap: 1.5rem;
                    "
                  >
                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Main Image URL</label
                      >
                      <div
                        style="
                          display: flex;
                          align-items: center;
                          gap: 0.75rem;
                        "
                      >
                        <input
                          type="text"
                          name="mainImage"
                          value="<%= hotel.mainImage %>"
                          style="
                            flex: 1;
                            padding: 0.75rem 1rem;
                            border-radius: 0.5rem;
                            border: 1px solid #d1d5db;
                            transition: all 0.2s;
                          "
                        />
                        <img
                          src="<%= hotel.mainImage %>"
                          alt="Main Image Preview"
                          style="
                            height: 3rem;
                            width: 3rem;
                            object-fit: cover;
                            border-radius: 0.5rem;
                            border: 1px solid #d1d5db;
                          "
                        />
                      </div>
                    </div>

                    <div class="form-group">
                      <label
                        style="
                          display: block;
                          font-size: 0.875rem;
                          font-weight: 600;
                          color: #374151;
                          margin-bottom: 0.5rem;
                        "
                        >Additional Images</label
                      >
                      <div
                        id="imagesList"
                        style="
                          display: flex;
                          flex-direction: column;
                          gap: 0.75rem;
                          max-height: 300px;
                          overflow-y: auto;
                          padding: 1rem;
                          background-color: #f9fafb;
                          border-radius: 0.5rem;
                        "
                      >
                        <% hotel.images.forEach((image, index) =>
                        { %>
                        <div
                          style="
                            display: flex;
                            align-items: center;
                            gap: 0.75rem;
                            background: white;
                            padding: 0.5rem;
                            border-radius: 0.5rem;
                            box-shadow: 0 1px 2px 0
                              rgba(0, 0, 0, 0.05);
                          "
                        >
                          <input
                            type="text"
                            name="images[]"
                            value="<%= image %>"
                            style="
                              flex: 1;
                              padding: 0.5rem 1rem;
                              border-radius: 0.5rem;
                              border: 1px solid #d1d5db;
                              transition: all 0.2s;
                            "
                          />
                          <img
                            src="<%= image %>"
                            alt="Image Preview"
                            style="
                              height: 2.5rem;
                              width: 2.5rem;
                              object-fit: cover;
                              border-radius: 0.5rem;
                              border: 1px solid #d1d5db;
                            "
                          />
                          <button
                            type="button"
                            class="remove-item"
                            style="
                              color: #ef4444;
                              transition: color 0.2s;
                            "
                          >
                            <span
                              class="material-symbols-outlined"
                              >delete</span
                            >
                          </button>
                        </div>
                        <% }) %>
                      </div>
                      <button
                        type="button"
                        id="addImage"
                        style="
                          display: flex;
                          align-items: center;
                          margin-top: 0.75rem;
                          padding: 0.5rem 1rem;
                          background: #22c55e;
                          color: white;
                          border-radius: 0.5rem;
                          border: none;
                          cursor: pointer;
                          transition: all 0.2s;
                        "
                      >
                        <span
                          class="material-symbols-outlined"
                          style="margin-right: 0.5rem"
                          >add</span
                        >
                        Add Image
                      </button>
                    </div>
                  </div>
                </div>

                <div
                  style="margin-top: 2rem; grid-column: 1 / -1"
                >
                  <button
                    type="submit"
                    style="
                      width: 100%;
                      padding: 1rem 1.5rem;
                      background: #2563eb;
                      color: white;
                      border-radius: 0.5rem;
                      border: none;
                      font-size: 1.125rem;
                      font-weight: 600;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      cursor: pointer;
                      transition: background-color 0.2s;
                    "
                  >
                    <span
                      class="material-symbols-outlined"
                      style="margin-right: 0.5rem"
                      >save</span
                    >
                    Save Changes
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <script>
        // Helper function to create remove buttons
        function createRemoveButton() {
          const button = document.createElement("button");
          button.type = "button";
          button.style.color = "#ef4444";
          button.style.transition = "color 0.2s";
          button.style.cursor = "pointer";
          button.innerHTML =
            '<span class="material-symbols-outlined">delete</span>';
          button.onmouseover = function () {
            this.style.color = "#dc2626";
          };
          button.onmouseout = function () {
            this.style.color = "#ef4444";
          };
          button.onclick = function () {
            this.parentElement.remove();
          };
          return button;
        }

        // Add new amenity
        document.getElementById("addAmenity").onclick =
          function () {
            const container = document.createElement("div");
            container.style.display = "flex";
            container.style.alignItems = "center";
            container.style.gap = "0.75rem";
            container.style.background = "white";
            container.style.padding = "0.5rem";
            container.style.borderRadius = "0.5rem";
            container.style.boxShadow =
              "0 1px 2px 0 rgba(0, 0, 0, 0.05)";

            const input = document.createElement("input");
            input.type = "text";
            input.name = "amenities[]";
            input.style.flex = "1";
            input.style.padding = "0.5rem 1rem";
            input.style.borderRadius = "0.5rem";
            input.style.border = "1px solid #d1d5db";
            input.style.transition = "all 0.2s";

            container.appendChild(input);
            container.appendChild(createRemoveButton());
            document
              .getElementById("amenitiesList")
              .appendChild(container);
            input.focus();
          };

        // Add new policy
        document.getElementById("addPolicy").onclick =
          function () {
            const container = document.createElement("div");
            container.className =
              "flex items-center space-x-3 bg-white p-2 rounded-lg shadow-sm";

            const input = document.createElement("input");
            input.type = "text";
            input.name = "policies[]";
            input.className =
              "flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all";

            container.appendChild(input);
            container.appendChild(createRemoveButton());
            document
              .getElementById("policiesList")
              .appendChild(container);
            input.focus();
          };

        // Add new image
        document.getElementById("addImage").onclick =
          function () {
            const container = document.createElement("div");
            container.className =
              "flex items-center space-x-3 bg-white p-2 rounded-lg shadow-sm";

            const input = document.createElement("input");
            input.type = "text";
            input.name = "images[]";
            input.className =
              "flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all";

            const img = document.createElement("img");
            img.className =
              "h-10 w-10 object-cover rounded-lg border border-gray-300";
            img.alt = "Image Preview";

            // Update image preview when URL changes
            input.addEventListener("change", () => {
              img.src = input.value;
            });

            container.appendChild(input);
            container.appendChild(img);
            container.appendChild(createRemoveButton());
            document
              .getElementById("imagesList")
              .appendChild(container);
            input.focus();
          };

        // Add new feature category
        document.getElementById("addFeatureCategory").onclick =
          function () {
            const container = document.createElement("div");
            container.style.padding = "1rem";
            container.style.backgroundColor = "#f9fafb";
            container.style.borderRadius = "0.5rem";

            const categoryContainer =
              document.createElement("div");
            categoryContainer.style.display = "flex";
            categoryContainer.style.alignItems = "center";
            categoryContainer.style.gap = "0.75rem";
            categoryContainer.style.marginBottom = "1rem";

            const categoryIcon = document.createElement("span");
            categoryIcon.className = "material-symbols-outlined";
            categoryIcon.style.color = "#4b5563";
            categoryIcon.textContent = "category";

            const categoryInput =
              document.createElement("input");
            categoryInput.type = "text";
            categoryInput.name = "featureCategories[]";
            categoryInput.style.flex = "1";
            categoryInput.style.padding = "0.5rem 1rem";
            categoryInput.style.borderRadius = "0.5rem";
            categoryInput.style.border = "1px solid #d1d5db";
            categoryInput.style.transition = "all 0.2s";
            categoryInput.placeholder = "Category";

            const featuresList = document.createElement("div");
            featuresList.style.display = "flex";
            featuresList.style.flexDirection = "column";
            featuresList.style.gap = "0.75rem";
            featuresList.style.paddingLeft = "2rem";

            const addFeatureBtn =
              document.createElement("button");
            addFeatureBtn.type = "button";
            addFeatureBtn.style.display = "flex";
            addFeatureBtn.style.alignItems = "center";
            addFeatureBtn.style.marginTop = "0.75rem";
            addFeatureBtn.style.marginLeft = "2rem";
            addFeatureBtn.style.padding = "0.5rem 1rem";
            addFeatureBtn.style.backgroundColor = "#3b82f6";
            addFeatureBtn.style.color = "white";
            addFeatureBtn.style.borderRadius = "0.5rem";
            addFeatureBtn.style.border = "none";
            addFeatureBtn.style.cursor = "pointer";
            addFeatureBtn.style.transition =
              "background-color 0.2s";

            const addIcon = document.createElement("span");
            addIcon.className = "material-symbols-outlined mr-2";
            addIcon.textContent = "add";

            const btnText =
              document.createTextNode("Add Feature");
            addFeatureBtn.appendChild(addIcon);
            addFeatureBtn.appendChild(btnText);

            categoryContainer.appendChild(categoryIcon);
            categoryContainer.appendChild(categoryInput);

            container.appendChild(categoryContainer);
            container.appendChild(featuresList);
            container.appendChild(addFeatureBtn);
            document
              .getElementById("featuresList")
              .appendChild(container);
            categoryInput.focus();

            // Add feature button click handler
            addFeatureBtn.onclick = function () {
              const featureContainer =
                document.createElement("div");
              featureContainer.style.display = "flex";
              featureContainer.style.alignItems = "center";
              featureContainer.style.gap = "0.75rem";
              featureContainer.style.background = "white";
              featureContainer.style.padding = "0.5rem";
              featureContainer.style.borderRadius = "0.5rem";
              featureContainer.style.boxShadow =
                "0 1px 2px 0 rgba(0, 0, 0, 0.05)";

              const featureIcon = document.createElement("span");
              featureIcon.className =
                "material-symbols-outlined";
              featureIcon.style.color = "#9ca3af";
              featureIcon.textContent = "check_circle";

              const featureInput =
                document.createElement("input");
              featureInput.type = "text";
              featureInput.name = `features_${categoryInput.value}[]`;
              featureInput.style.flex = "1";
              featureInput.style.padding = "0.5rem 1rem";
              featureInput.style.borderRadius = "0.5rem";
              featureInput.style.border = "1px solid #d1d5db";
              featureInput.style.transition = "all 0.2s";

              featureContainer.appendChild(featureIcon);
              featureContainer.appendChild(featureInput);
              featureContainer.appendChild(createRemoveButton());
              featuresList.appendChild(featureContainer);
              featureInput.focus();
            };
          };

        // Form submission
        document.getElementById("editHotelForm").onsubmit =
          async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const hotelData = {
              title: formData.get("title"),
              description: formData.get("description"),
              address: formData.get("address"),
              location: formData.get("location"),
              rating: Number(formData.get("rating")),
              currency: formData.get("currency"),
              mainImage: formData.get("mainImage"),
              amenities: [...formData.getAll("amenities[]")],
              policies: [...formData.getAll("policies[]")],
              images: [...formData.getAll("images[]")],
              features: {},
            };

            // Handle features
            const categories = formData.getAll(
              "featureCategories[]"
            );
            categories.forEach((category) => {
              if (category) {
                hotelData.features[category] = formData.getAll(
                  `features_${category}[]`
                );
              }
            });

            try {
              const response = await fetch(
                "/dashboard/api/hotel",
                {
                  method: "PUT",
                  headers: {
                    "Content-Type": "application/json",
                  },
                  body: JSON.stringify(hotelData),
                }
              );

              if (response.ok) {
                alert("Hotel details updated successfully!");
                window.location.reload();
              } else {
                const error = await response.json();
                alert("Error updating hotel: " + error.message);
              }
            } catch (error) {
              alert("Error updating hotel: " + error.message);
            }
          };

        // Initialize remove buttons
        document
          .querySelectorAll(".remove-item")
          .forEach((button) => {
            button.onclick = function () {
              this.parentElement.remove();
            };
          });
      </script>
    </div>
  </body>
</html>
